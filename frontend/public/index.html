<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document Processor & Extractor</title>
    <!-- Link to your custom stylesheet -->
    <link rel="stylesheet" href="style.css" />
    <!-- Tailwind CSS CDN for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-gray-100 p-4 sm:p-6 font-sans antialiased text-gray-800">
    <div class="max-w-7xl mx-auto bg-white shadow-lg rounded-xl p-6 sm:p-8">
      <h1 class="text-3xl sm:text-4xl font-bold text-center text-indigo-700 mb-8">
        Document Processor & Extractor
      </h1>
 
      <!-- This div will be used as a portal for the modal, allowing it to overlay content -->
      <div id="modal-portal"></div>
 
      <!-- Loading Overlay - hidden by default, shown by JavaScript during async operations -->
      <div
        id="loading-overlay"
        class="hidden fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50"
      >
        <div class="bg-white p-6 rounded-lg shadow-xl flex items-center space-x-3">
          <!-- SVG for loading spinner -->
          <svg
            class="animate-spin h-8 w-8 text-indigo-500"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="4"
            ></circle>
            <path
              class="opacity-75"
              fill="currentColor"
              d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
            ></path>
          </svg>
          <p class="text-lg text-gray-700">Loading...</p>
        </div>
      </div>
 
      <!-- Main content container for the application views -->
      <div id="main-container">
        <!-- Document Upload Section -->
        <div
          id="upload-section"
          class="border-2 border-dashed border-indigo-300 rounded-lg p-6 text-center mb-8 hover:border-indigo-500 transition-colors duration-200 cursor-pointer"
        >
          <!-- Hidden file input, triggered by the label -->
          <input
            type="file"
            id="file-upload"
            class="hidden"
            accept=".pdf,.jpg,.jpeg,.png"
          />
          <label for="file-upload" class="block cursor-pointer">
            <!-- SVG for upload icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-upload mx-auto h-12 w-12 text-indigo-500 mb-3"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
              <polyline points="17 8 12 3 7 8" />
              <line x1="12" x2="12" y1="3" y2="15" />
            </svg>
            <p class="text-lg text-gray-700 font-medium">
              Drag & Drop your document here
            </p>
            <p class="text-sm text-gray-500">
              or click to browse (PDF, JPG, PNG)
            </p>
          </label>
        </div>
 
        <!-- Document List Section -->
        <div id="list-section">
          <div
            class="flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0"
          >
            <h2 class="text-2xl font-semibold text-gray-700">
              Processed Documents
            </h2>
            <div class="relative w-full sm:w-auto">
              <!-- SVG for search icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-search absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"
              >
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.3-4.3" />
              </svg>
              <input
                type="text"
                id="search-input"
                placeholder="Search documents..."
                class="w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"
              />
            </div>
          </div>
 
          <div
            class="overflow-x-auto rounded-lg shadow-sm border border-gray-200"
          >
            <table id="document-table" class="w-full table-auto">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    data-sort="id"
                    class="cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tl-lg"
                  >
                    <div class="flex items-center">
                      ID
                      <!-- Placeholder for sort icon, populated by JS -->
                      <span id="sort-icon-id"></span>
                    </div>
                  </th>
                  <th
                    data-sort="filename"
                    class="cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    <div class="flex items-center">
                      Filename
                      <!-- Placeholder for sort icon, populated by JS -->
                      <span id="sort-icon-filename"></span>
                    </div>
                  </th>
                  <th
                    data-sort="processing_status"
                    class="cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    <div class="flex items-center">
                      Status
                      <!-- Placeholder for sort icon, populated by JS -->
                      <span id="sort-icon-processing_status"></span>
                    </div>
                  </th>
                  <th
                    data-sort="upload_date"
                    class="cursor-pointer px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    <div class="flex items-center">
                      Uploaded At
                      <!-- Placeholder for sort icon, populated by JS -->
                      <span id="sort-icon-upload_date"></span>
                    </div>
                  </th>
                  <th
                    class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tr-lg"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <!-- Document rows will be inserted here by JavaScript -->
              <tbody id="document-list" class="bg-white divide-y divide-gray-200">
              </tbody>
            </table>
          </div>
        </div>
 
        <!-- Document Detail View - hidden by default, shown by JavaScript -->
        <div id="detail-section" class="hidden space-y-6">
          <div class="flex items-center space-x-4 mb-4">
            <button
              id="back-button"
              class="p-2 rounded-full bg-gray-200 text-gray-600 hover:bg-gray-300 transition-colors"
              title="Back to list"
            >
              <!-- SVG for back arrow icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-arrow-left h-5 w-5"
              >
                <path d="m12 19-7-7 7-7" />
                <path d="M19 12H5" />
              </svg>
            </button>
            <h2 class="text-2xl font-bold text-gray-800">
              Details for: <span id="doc-filename" class="text-indigo-600"></span>
            </h2>
          </div>
 
          <!-- Extracted Key-Value Pairs Section -->
          <div
            id="extracted-data"
            class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
          >
            <h3 class="text-xl font-semibold mb-3">Extracted Key-Value Pairs</h3>
            <div
              class="overflow-x-auto rounded-lg border border-gray-200"
            >
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-100">
                  <tr>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Key
                    </th>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Value
                    </th>
                  </tr>
                </thead>
                <!-- Extracted data rows will be inserted here by JavaScript -->
                <tbody id="extracted-data-body" class="bg-white divide-y divide-gray-200">
                </tbody>
              </table>
            </div>
          </div>
 
          <!-- Line Items Section - hidden by default, shown if data exists -->
          <div
            id="line-items-section"
            class="hidden bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
          >
            <h3 class="text-xl font-semibold mb-3">Line Items</h3>
            <div
              class="overflow-x-auto rounded-lg border border-gray-200"
            >
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-100">
                  <tr>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Description
                    </th>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Quantity
                    </th>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Unit Price
                    </th>
                    <th
                      class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                    >
                      Line Total
                    </th>
                  </tr>
                </thead>
                <!-- Line items will be inserted here by JavaScript -->
                <tbody id="line-items-body" class="bg-white divide-y divide-gray-200">
                </tbody>
              </table>
            </div>
          </div>
 
          <!-- Raw OCR Text Section - hidden by default, shown if data exists -->
          <div
            id="raw-text-section"
            class="hidden bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
          >
            <h3 class="text-xl font-semibold mb-3">Raw OCR Text</h3>
            <pre
              id="raw-text-content"
              class="whitespace-pre-wrap text-sm text-gray-700 bg-gray-100 p-4 rounded-md overflow-x-auto"
            ></pre>
          </div>
        </div>
      </div>
    </div>
    <!-- Link to your JavaScript file -->
    <script src="script.js"></script>
  </body>
</html>






